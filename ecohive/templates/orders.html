{%extends 'base.html'%}
{% load static %}
{%block content%}
    <div class="hero-wrap hero-bread"style="background-image: url({% static 'images/bg_1.jpg' %});">
        <div class="container">
          <div class="row no-gutters slider-text align-items-center justify-content-center">
            <div class="col-md-9 ftco-animate text-center">
                <p class="breadcrumbs"><span class="mr-2"><a href="{% url 'index' %}">Home</a></span> <span>Orders</span></p>
              <h1 class="mb-0 bread">Your Orders</h1>
            </div>
          </div>
        </div>
      </div>        <!-- ... Hero section content ... -->
    </div>
    <!-- Add a section for displaying order details -->
    <section class="ftco-section ftco-cart">
      <div class="container">
          <div class="row">
              <div class="col-md-12 ftco-animate">
                  <div class="cart-list">
                      <table class="table">
                          <thead class="thead-primary">
                              <tr class="text-center">
                                  <th>Order ID</th>
                                  <th>Order Date</th>
                                  <th>Product Name</th>
                                  <th>Image</th>
                                  <th>Price</th>
                                  <th>Status</th>
                                  <th>Total Paid Amount</th>
                                  <th>Download Invoice</th> <!-- Add a new column for the download button -->
                              </tr>
                          </thead>
                          <tbody>
                              {% for order in orders %}
                              <tr class="text-center">
                                  <td>{{ order.id }}</td>
                                  <td>{{ order.order_date }}</td>
                                  <td>
                                      {% for item in order.orderitem_set.all %}
                                      {{ item.product.product_name }} (Quantity: {{ item.quantity }})
                                      <br>
                                      {% endfor %}
                                  </td>
                                  <td>
                                      {% for item in order.orderitem_set.all %}
                                      <img src="{{ item.product.product_image.url }}" alt="{{ item.product.product_name }}" width="100">
                                      <br>
                                      {% endfor %}
                                  </td>
                                  <td>
                                      {% for item in order.orderitem_set.all %}
                                      {{ item.price }}
                                      <br>
                                      {% endfor %}
                                  </td>
                                  <td>{{ order.get_payment_status_display }}</td>
                                  <td>{{ order.total_price }}</td>
                                  <td>
                                    <a href="{% url 'generate_pdf' order.id %}" target="_blank">
                                        <i class="fas fa-download"></i>
                                    </a>
                                </td>
                              </tr>
                              {% endfor %}
                          </tbody>
                      </table>
                  </div>
              </div>
          </div>
      </div>
  </section>
  <style>
    /* Add your custom CSS styles here */
    body {
        background-color: #f7f7f7;
        font-family: Arial, sans-serif;
    }
    h2 {
        color: #333;
    }
    table {
        width: 150%;
        border-collapse: collapse;
        margin-top: 20px;
    }
    th, td {
        padding: 10px;
        text-align: center;
    }
    th {
        background-color: #333;
        color: #fff;
    }
    tr:nth-child(even) {
        background-color: #f2f2f2;
    }
    .status-pending {
        color: #FF5733; /* Red for Pending status */
    }
    .status-successful {
        color: #4CAF50; /* Green for Successful status */
    }
    .status-failed {
        color: #FFC300; /* Yellow for Failed status */
    }
    .cart-total {
        text-align: center;
        margin-top: 20px;
    }
    .cart-total h6 {
        color: #333;
    }
    /* Target the container within the .ftco-section.ftco-cart */
.ftco-section.ftco-cart .container {
    max-width: 1200px; /* Set your desired maximum width */
    margin: 0 auto; /* Center the container */
}
</style>
{%endblock%}